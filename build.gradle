
apply plugin: 'war'


repositories {
    mavenCentral()
}

apply from: file('gradle/dependencies.gradle')

sourceCompatibility = 1.7
version = '1.0'
task customJar(type: Jar) {
    manifest {
        attributes 'Implementation-Title': 'Gradle Quickstart',
                'Implementation-Version-22': version
    }
}

dependencies {
    compile "joda-time:joda-time:2.2"
    testCompile 'junit:junit:4.12'
}

task downloadDependencies(type: Exec) {
    configurations.testRuntime.files
    commandLine 'echo', 'Downloaded all dependencies'
}

build.dependsOn downloadDependencies

buildscript {
    repositories {
        flatDir dirs: "build/libs"
    }
    dependencies {
        classpath "commons-io:commons-io:2.4"
    }
}

task copyWARFile(type: Copy) {
    println "Copy from ${buildDir}/libs into /home/estafet/Desktop"
    from war.archivePath //"${buildDir}/libs"
    into "/home/estafet/Desktop"
    include "*.war"
}

task deployLocallyInWebServer(type: Copy, dependsOn: war) {
    from(war)
    into project.file('webServerURL/')
}